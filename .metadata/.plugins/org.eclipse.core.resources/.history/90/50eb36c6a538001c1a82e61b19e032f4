package escapeRoom;

import java.util.*; 
import java.io.*;

public class RoomService implements RoomInterface {

	@Override
	public List<RoomDTO> memberJoin(List<RoomDTO> memberList) {

		Scanner scan = new Scanner(System.in);

		System.out.print("ì•„ì´ë”” : ");
		String id = scan.next();
		System.out.print("ë¹„ë°€ë²ˆí˜¸ : ");
		String password = scan.next();
		int memberNum = memberList.size() + 1;

		RoomDTO r = new RoomDTO(id, password, "ğŸ˜€ê·¸ëƒ¥íšŒì›ğŸ˜€", memberNum, 1000);
		memberList.add(r);
		System.out.println(id + "ë‹˜ ê°€ì…ì„ ì¶•í•˜ë“œë¦½ë‹ˆë‹¤! ê°€ì…ê¸°ë…ìœ¼ë¡œ 1000ì› ì§€ê¸‰ëìŠµë‹ˆë‹¤.");

		return memberList;

	}

	@Override
	public void memberView(List<RoomDTO> memberList) {

		for (RoomDTO r : memberList) {
			System.out.println(r.toString());
		}

	}

	@Override
	public int LoginCheck(List<RoomDTO> memberList) {

		Scanner scan = new Scanner(System.in);

		int loginNum = -1;

		System.out.print("ì•„ì´ë”” : ");
		String id = scan.next();
		System.out.print("ë¹„ë°€ë²ˆí˜¸ : ");
		String password = scan.next();

		RoomDTO m = null;
		for (int i = 0; i < memberList.size(); i++) {
			m = memberList.get(i);
			if (id.equals(m.getId()) && password.equals(m.getPassword())) {
				loginNum = i;
			}
		}
		return loginNum;

	}

	@Override
	public List<RoomDTO> store(List<RoomDTO> memberList) {
		int num = LoginCheck(memberList);
		if (num >= 0) {
			RoomDTO m = memberList.get(num);
			System.out.println("ìƒì ì—ì„œëŠ” ë‹¹ì‹ ì˜ ë­í¬ë¥¼ ì‚´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¬¼ê±´ì„ ê³ ë¥´ê³  ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
			System.out
					.println("1. ğŸ›•ğŸ’°ë¶€ìíšŒì›ğŸ›•ğŸ’°(90ë§Œì›) 2. ê±°ì§€íšŒì›ğŸ¥º(10ì›) 3. ğŸ‘¥ë¹šìŸì´ íšŒì›ğŸ‘¥ (100ë§Œì›) 4. ğŸ›ë²Œë ˆíšŒì›ğŸ›(0ì›ì— ëª¨ì‹­ë‹ˆë‹¤.) 5.ì¢…ë£Œ");
			Scanner scan = new Scanner(System.in);
			int input = scan.nextInt();
			switch (input) {
			case 1:
				if (m.getMoney() >= 900000) {
					System.out.println("ë¶€ìíšŒì›ì´ ë˜ì…¨ìŠµë‹ˆë‹¤!");
					m.setMemberRank("ğŸ›•ğŸ’°ë¶€ìíšŒì›ğŸ›•ğŸ’°");
					m.setMoney(m.getMoney() - 900000);
					System.out.println(m);
				} else {
					System.out.println("ëˆì´ ë¶€ì¡±í•©ë‹ˆë‹¤.");
				}
				break;
			case 2:
				if (m.getMoney() >= 10) {
					System.out.println("ê±°ì§€íšŒì›ì´ ë˜ì…¨ìŠµë‹ˆë‹¤!");
					m.setMemberRank("ê±°ì§€íšŒì›ğŸ¥º");
					m.setMoney(m.getMoney() - 10);
					System.out.println(m);
				} else {
					System.out.println("ëˆì´ ë¶€ì¡±í•©ë‹ˆë‹¤.");
				}
				break;
			case 3:
				if (m.getMoney() <= -1000000) {
					System.out.println("ë¹šìŸì´íšŒì›ì´ ë˜ì…¨ìŠµë‹ˆë‹¤!");
					m.setMemberRank("ğŸ‘¥ë¹šìŸì´ íšŒì›ğŸ‘¥");
					m.setMoney(m.getMoney() + 1000000);
					System.out.println(m);
				} else {
					System.out.println("ë‹¹ì‹  ì§€ê°‘ì—” ëˆì´ ë„ˆë¬´ ë§ìŠµë‹ˆë‹¤.");
				}
				break;
			case 4:
				if (m.getMoney() >= 0) {
					System.out.println("ë²Œë ˆíšŒì›ì´ ë˜ì…¨ìŠµë‹ˆë‹¤!");
					m.setMemberRank("ğŸ›ë²Œë ˆíšŒì›ğŸ›");
					System.out.println(m);
				} else {
					System.out.println("ë¹šì´ ìˆì–´ ì‚´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
				}
				break;
			case 5:
				System.out.println("ìƒì ì„ ë‚˜ê°‘ë‹ˆë‹¤.");
				break;

			}

		} else {
			System.out.println("ë¡œê·¸ì¸ ì‹¤íŒ¨");
		}

		return memberList;

	}

	@Override
	public void honoraryMember(List<RoomDTO> memberList) {
		
		
		
		System.out.println("ì—­ëŒ€ ëª…ì˜ˆì˜ ì „ë‹¹ íšŒì›");
		 try{
		        //íŒŒì¼ ê°ì²´ ìƒì„±
		        File file = new File("D:\\development_Phl\\source\\escapeRoom\\EscapeRoom.text");
		         //ì…ë ¥ ìŠ¤íŠ¸ë¦¼ ìƒì„±
		         FileReader file_reader = new FileReader(file);
		         int cur = 0;
		         while((cur = file_reader.read()) != -1){
		            System.out.print((char)cur);
		         }
		         file_reader.close();
		        }catch (FileNotFoundException e) {
		            e.getStackTrace();
		        }catch(IOException e){
		            e.getStackTrace();
		        }
		 
	}

	@Override
	public List<RoomDTO> escapeGame(List<RoomDTO> memberList) {
		GameService g = new GameService();
		g.login(memberList);
		g.stage1(memberList);
		g.stage2(memberList);
		g.stage3(memberList);
		g.stage4(memberList);
			
		return memberList;
	}
		

}
